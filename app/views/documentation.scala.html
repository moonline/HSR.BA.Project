@(classesAndMethods: Map[Class[_ <: Controller], List[docs.DocumentationLogic.MethodDocumentation]], logics: docs.DocumentationLogic)

@main("API documentation") {

<h1>API Documentation for EEPPI</h1>

<h2><a name="authentication">Authentication</a></h2>
<p>
    Some methods need authentication.
    The authentication can be made by providing a cookie generated by <a href="@controllers.user.routes.UserController.login()">@controllers.user.routes.UserController.login().url</a> or by providing HTTP Basic Authentication.
    The HTTP Basic Authentication could be used with something like <a href="@controllers.user.routes.PPTAccountController.readAll()?basicAuth=true">@controllers.user.routes.PPTAccountController.readAll().absoluteURL(request()).replaceAll("^(https?:\\/\\/)","$1username:password@")?basicAuth=true</a>.
    The GET parameter "basicAuth=true" lets the server enable HTTP Basic Authentication.
    A response with status code 401 (Unauthorized) is returned, when authentication information are required but are not provided.
</p>

@for((aClass,methods) <- classesAndMethods) {
    <h2>@logics.getHumanFriendlyClassName(aClass)</h2>
    @for(method <- methods) {
        <h3>@method.call.method @logics.getRequestUrl(method, false)</h3>

        @if(method.queryDescription != null) {
            <p>@method.queryDescription</p>
        }

		<p>
        @if(method.requireAuthentication) {
            <a href="#authentication">Authentication</a> is required to use this method.
        }else{
            This method is public and can be used without authentication.
        }
		</p>

        @if(method.queryParameters != null) {
            <h4>Parameters</h4>
            <table>
                <tr>
                    <th>Name</th>
                    <th>Type</th>
                    <th>Description</th>
                </tr>
                @for(parameter <- method.queryParameters) {
                <tr>
                    <td>@parameter.name</td>
                    <td>@parameter.format.getSimpleName</td>
                    <td>@parameter.description</td>
                </tr>
                }
            </table>
        }

        @if(method.queryResponses != null) {
            <h4>Responses</h4>
            <table>
                <tr>
                    <th>Status</th>
                    <th>Description</th>
                </tr>
                @for(response <- method.queryResponses) {
                <tr>
                    <td>@if(response.status>0){@response.status}else{&dash;}</td>
                    <td>@response.description</td>
                </tr>
                }
            </table>
        }

        @if(method.queryExamples != null) {
            <h4>Examples</h4>
            @for(example <- method.queryExamples) {
				<pre class="prettyprint"><code class="language-bash">@logics.getCurlRequestString(method, example)</code></pre>
                @defining(logics.getResponseString(method, example)) { response=>
                    The previous command
                    @if(response.isRealSimulation){
                        <strong title="This response was calculated live on generation of this documentation.">did</strong>
                    }else{
                        <strong title="This response is not a live result, as a creation of a live one isn't that easy.">would probably</strong>
                    } return with status code <strong>@response.getStatus()@if(response.getStatusText!=null){ (@response.getStatusText())}</strong> and yield@if(response.isRealSimulation){ed} the following:
				<pre class="prettyprint"><code class="language-json">@response.getBody</code></pre>
                }
            }
        }
    }
}

}
